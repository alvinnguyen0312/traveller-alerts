(this.webpackJsonpreactexercises=this.webpackJsonpreactexercises||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),c=a(12),o=a(34),s=a(28),i=a(75),u=a.n(i),m=a(133),p=a(77),g=Object(p.a)({typography:{useNextVariants:!0},palette:{common:{black:"#000",white:"#fff"},background:{paper:"#fff",default:"#fafafa"},primary:{light:"rgba(58, 125, 204, 1)",main:"rgba(247, 158, 6, 1)",dark:"rgba(22, 23, 24, 1)",contrastText:"#fff"},secondary:{light:"rgba(211, 28, 90, 1)",main:"rgba(0, 0, 0, 1)",dark:"rgba(126, 211, 33, 1)",contrastText:"#fff"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}}}),f=a(23),d=a.n(f),h=a(30),E=a(36),v=a(134),b=a(137),y=a(138),O=a(139),S=a(140),j=a(141),x=a(46),k=a(142),A=a(155),T=(a(50),a(25)),C=a.n(T),B=function(){var e=Object(n.useReducer)((function(e,t){return Object(E.a)({},e,{},t)}),{msg:"",snackBarMsg:"",contactServer:!1,setupalerts:""}),t=Object(c.a)(e,2),a=t[0],l=t[1];Object(n.useEffect)((function(){o()}),[]);var o=function(){var e=Object(h.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l({contactServer:!0,snackBarMsg:"Running setup..."}),e.next=4,fetch("http://localhost:5000/graphql",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({query:"{setupalerts}"})});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,l({snackBarMsg:"Alert setup completed",setupalerts:a.data.setupalerts,contactServer:!0}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),l({msg:"Problem running alert setup - ".concat(e.t0.message)});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),s=a.setupalerts.replace(/([.])\s*(?=[A-Z])/g,"$1|").split("|");return r.a.createElement(m.a,{theme:g},r.a.createElement(v.a,null,r.a.createElement(C.a,{color:"primary",style:{fontSize:100,marginLeft:"45%"}}),r.a.createElement(b.a,{title:"Alert Setup - Details",color:"inherit",style:{textAlign:"center",paddingTop:"10vh"}}),r.a.createElement(y.a,null,r.a.createElement(O.a,null,s.map((function(e){return r.a.createElement(S.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{color:"primary"},e)))})))),r.a.createElement(k.a,null,r.a.createElement("br",null),r.a.createElement(x.a,{color:"primary",style:{float:"right",paddingRight:"1vh",fontSize:"smaller"}},"\xa9INFO3139 - 2020"))),r.a.createElement(A.a,{open:a.contactServer,message:a.snackBarMsg,autoHideDuration:5e3,onClose:function(){l({contactServer:!1,msg:"Alerts loaded"})}}))},M=a(151),q=a(146),w=a(152),N=function(){var e=Object(n.useState)(""),t=Object(c.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),s=Object(c.a)(o,2),i=s[0],u=s[1],p=Object(n.useReducer)((function(e,t){return Object(E.a)({},e,{},t)}),{msg:"",snackBarMsg:"",contactServer:!1,countries:[]}),f=Object(c.a)(p,2),y=f[0],O=f[1];Object(n.useEffect)((function(){S()}),[]);var S=function(){var e=Object(h.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O({contactServer:!0,snackBarMsg:"Attempting to load countries from server..."}),e.next=4,fetch("http://localhost:5000/graphql",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({query:"{countries}"})});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,O({countries:a.data.countries,snackBarMsg:"Found ".concat(a.data.countries.length," countries"),contactServer:!0}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),O({msg:"Problem running countries setup - ".concat(e.t0.message)});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(h.a)(d.a.mark((function e(){var t,n,r,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),r=""+n,(c=new Headers).append("Content-Type","application/json"),e.prev=5,e.next=8,fetch("http://localhost:5000/graphql",{method:"POST",headers:c,body:JSON.stringify({query:'mutation{posttraveller(name:"'.concat(i,'",country:"').concat(a,'",timestamp:"').concat(r,'") {name,country,timestamp}}')})});case 8:return o=e.sent,e.next=11,o.json();case 11:e.sent,O({snackBarMsg:"Added advisory on ".concat(r," "),contactServer:!0}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),O({snackBarMsg:e.t0.message,contactServer:!0});case 18:u(""),l("");case 20:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(m.a,{theme:g},r.a.createElement(v.a,null,r.a.createElement(C.a,{color:"primary",style:{fontSize:100,marginLeft:"45%"}}),r.a.createElement(b.a,{title:"Add Advisory",color:"inherit",style:{textAlign:"center",paddingTop:"10vh"}}),r.a.createElement(k.a,null,r.a.createElement(M.a,{label:"Traveller's Name",onChange:function(e){u(e.target.value)},value:i}),r.a.createElement("p",null),r.a.createElement(w.a,{id:"",options:y.countries,style:{width:300},onChange:function(e,t){l(t||"")},value:a,renderInput:function(e){return r.a.createElement(M.a,Object.assign({},e,{label:"countries",variant:"outlined",fullWidth:!0}))}}),r.a.createElement(q.a,{variant:"contained",color:"primary",style:{marginTop:"1%"},disabled:!i||""===a&&!0,onClick:j},"Add Advisory")),r.a.createElement(k.a,null,r.a.createElement("br",null),r.a.createElement(x.a,{color:"primary",style:{float:"right",paddingRight:"1vh",fontSize:"smaller"}},"\xa9INFO3139 - 2020"))),r.a.createElement(A.a,{open:y.contactServer,message:y.snackBarMsg,autoHideDuration:3e3,onClose:function(){O({contactServer:!1})}}))},P=a(143),F=a(156),R=a(147),J=a(153),z=a(148),I=function(){var e=Object(n.useState)("travellers"),t=Object(c.a)(e,2),l=t[0],o=t[1],s=Object(n.useState)(""),i=Object(c.a)(s,2),u=i[0],p=i[1],f=Object(n.useReducer)((function(e,t){return Object(E.a)({},e,{},t)}),{msg:"",snackBarMsg:"",contactServer:!1,dataOptions:[],allTravellers:[],allAlerts:[]}),T=Object(c.a)(f,2),B=T[0],q=T[1];Object(n.useEffect)((function(){N(l)}),[]);var N=function(){var e=Object(h.a)(d.a.mark((function e(t){var n,r,l,c,o,s,i,u,m,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q({contactServer:!0,snackBarMsg:"Attempting to load data from server..."}),e.next=4,fetch("http://localhost:5000/graphql",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({query:"{travellers{name,country,timestamp}}"})});case 4:return n=e.sent,e.next=7,fetch("http://localhost:5000/graphql",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({query:"{alerts{name,text,date,region,subregion}}"})});case 7:return r=e.sent,e.next=10,n.json();case 10:return l=e.sent,e.next=13,r.json();case 13:return c=e.sent,o=a(101),s=o.query(l,"$.data..name").filter((function(e,t){return o.query(l,"$.data..name").indexOf(e)===t})).sort(),e.next=18,fetch("http://localhost:5000/graphql",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({query:"{regions}"})});case 18:return i=e.sent,e.next=21,i.json();case 21:return u=e.sent,e.next=24,fetch("http://localhost:5000/graphql",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({query:"{subregions}"})});case 24:return m=e.sent,e.next=27,m.json();case 27:p=e.sent,q("travellers"===t?{dataOptions:s,snackBarMsg:"Found ".concat(s.length," travellers"),contactServer:!0,allTravellers:l.data.travellers,allAlerts:c.data.alerts}:"regions"===t?{dataOptions:u.data.regions,snackBarMsg:"Found ".concat(u.data.regions.length," regions"),contactServer:!0,allAlerts:c.data.alerts}:{dataOptions:p.data.subregions,snackBarMsg:"Found ".concat(p.data.subregions.length," subregions"),contactServer:!0,allAlerts:c.data.alerts}),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(0),console.log(e.t0),q({msg:"Problem running travellers setup - ".concat(e.t0.message)});case 35:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(m.a,{theme:g},r.a.createElement(v.a,null,r.a.createElement(C.a,{color:"primary",style:{fontSize:100,marginLeft:"45%"}}),r.a.createElement(b.a,{title:"List Advisories By",color:"inherit",style:{textAlign:"center",paddingTop:"10vh"}}),r.a.createElement(k.a,null,r.a.createElement(P.a,{component:"fieldset"},r.a.createElement(F.a,{row:!0,value:l,onChange:function(e){o(e.target.value),p(""),N(e.target.value)}},r.a.createElement(R.a,{value:"travellers",control:r.a.createElement(J.a,null),label:"Traveller",labelPlacement:"start"}),r.a.createElement(R.a,{value:"regions",control:r.a.createElement(J.a,null),label:"Regions",labelPlacement:"start"}),r.a.createElement(R.a,{value:"subregions",control:r.a.createElement(J.a,null),label:"Sub-regions",labelPlacement:"start"}))),r.a.createElement("p",null),r.a.createElement(w.a,{options:B.dataOptions,style:{width:300},onChange:function(e,t){t?(p(t),q({snackBarMsg:"Found ".concat("travellers"===l?B.allTravellers.filter((function(e){return e.name===t})).length:"regions"===l?B.allAlerts.filter((function(e){return e.region===t})).length:B.allAlerts.filter((function(e){return e.subregion===t})).length," alerts for ").concat(t),contactServer:!0})):p("")},value:u,renderInput:function(e){return r.a.createElement(M.a,Object.assign({},e,{label:l,variant:"outlined",fullWidth:!0}))}}),r.a.createElement(y.a,null,""!==u&&r.a.createElement(z.a,null,r.a.createElement(S.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{color:"primary",variant:"h6"},"Country")),r.a.createElement(j.a,{align:"justify"},r.a.createElement(x.a,{color:"primary",variant:"h6"},"Alert Information")))),r.a.createElement(O.a,null,"travellers"===l&&B.allTravellers.filter((function(e){return e.name===u})).map((function(e){return r.a.createElement(S.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{color:"primary"},e.country)),r.a.createElement(j.a,null,r.a.createElement(x.a,{color:"primary"},B.allAlerts.filter((function(t){return t.name===e.country})).map((function(e){return e.text})),r.a.createElement("br",null),e.timestamp)))})),"regions"===l&&B.allAlerts.filter((function(e){return e.region===u&&""!==u})).map((function(e){return r.a.createElement(S.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{color:"primary"},e.name)),r.a.createElement(j.a,null,r.a.createElement(x.a,{color:"primary"},e.text,r.a.createElement("br",null),e.date)))})),"subregions"===l&&B.allAlerts.filter((function(e){return e.subregion===u&&""!==u})).map((function(e){return r.a.createElement(S.a,null,r.a.createElement(j.a,null,r.a.createElement(x.a,{color:"primary"},e.name)),r.a.createElement(j.a,null,r.a.createElement(x.a,{color:"primary"},e.text,r.a.createElement("br",null),e.date)))}))))),r.a.createElement(k.a,null,r.a.createElement("br",null),r.a.createElement(x.a,{color:"primary",style:{float:"right",paddingRight:"1vh",fontSize:"smaller"}},"\xa9INFO3139 - 2020"))),r.a.createElement(A.a,{open:B.contactServer,message:B.snackBarMsg,autoHideDuration:3e3,onClose:function(){q({contactServer:!1})}}))},L=function(){return r.a.createElement(m.a,{theme:g},r.a.createElement(v.a,null,r.a.createElement(b.a,{title:"Travel Alerts",color:"inherit",style:{textAlign:"center",paddingTop:"10vh"}}),r.a.createElement(C.a,{color:"primary",style:{fontSize:100,marginLeft:"45%"}}),r.a.createElement(k.a,null,r.a.createElement("br",null),r.a.createElement(x.a,{color:"primary",style:{float:"right",paddingRight:"1vh",fontSize:"smaller"}},"\xa9INFO3139 - 2020"))))},D=a(149),H=a(150),$=a(145),W=a(78),K=a(157),V=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],l=t[1],i=function(){l(null)};return r.a.createElement(m.a,{theme:g},r.a.createElement(D.a,{position:"static"},r.a.createElement(H.a,null,r.a.createElement(x.a,{variant:"h6",color:"inherit"},"INFO3139 - Case Study #1 - Kiet Nguyen"),r.a.createElement($.a,{onClick:function(e){l(e.currentTarget)},color:"inherit",style:{marginLeft:"auto",paddingRight:"1vh"}},r.a.createElement(u.a,null)),r.a.createElement(W.a,{id:"simple-menu",anchorEl:a,open:Boolean(a),onClose:i},r.a.createElement(K.a,{component:o.b,to:"/home",onClick:i},"Home"),r.a.createElement(K.a,{component:o.b,to:"/reset-alert",onClick:i},"Reset Alerts"),r.a.createElement(K.a,{component:o.b,to:"/add-advisory",onClick:i},"Add Advisory"),r.a.createElement(K.a,{component:o.b,to:"/list-advisory",onClick:i},"List Advisories")))),r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return r.a.createElement(s.a,{to:"/home"})}}),r.a.createElement(s.b,{path:"/reset-alert",render:function(){return r.a.createElement(B,null)}}),r.a.createElement(s.b,{path:"/add-advisory",render:function(){return r.a.createElement(N,null)}}),r.a.createElement(s.b,{path:"/list-advisory",render:function(){return r.a.createElement(I,null)}}),r.a.createElement(s.b,{path:"/home",component:L})))};Object(l.render)(r.a.createElement(o.a,null,r.a.createElement(V,null)),document.querySelector("#root"))},50:function(e,t,a){},91:function(e,t,a){e.exports=a(103)}},[[91,1,2]]]);
//# sourceMappingURL=main.a6889eb0.chunk.js.map